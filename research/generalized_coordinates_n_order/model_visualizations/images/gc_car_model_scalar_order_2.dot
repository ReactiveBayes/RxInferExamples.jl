digraph G {
  rankdir=LR;
  subgraph cluster_t1 { label="t=1"; style=dashed;
    x_1_1 [label="x[1][1]", shape=circle];
    x_1_2 [label="x[1][2]", shape=circle];
    y_1_1 [label="y[1][1]", shape=doublecircle];
  }
  subgraph cluster_t2 { label="t=2"; style=dashed;
    x_2_1 [label="x[2][1]", shape=circle];
    x_2_2 [label="x[2][2]", shape=circle];
    y_2_1 [label="y[2][1]", shape=doublecircle];
  }
  subgraph cluster_t3 { label="t=3"; style=dashed;
    x_3_1 [label="x[3][1]", shape=circle];
    x_3_2 [label="x[3][2]", shape=circle];
    y_3_1 [label="y[3][1]", shape=doublecircle];
  }
  f_prior [label="Prior", shape=box];
  f_dyn_2 [label="Dynamics t=2", shape=box];
  f_dyn_3 [label="Dynamics t=3", shape=box];
  f_obs_1 [label="Obs t=1", shape=box];
  f_obs_2 [label="Obs t=2", shape=box];
  f_obs_3 [label="Obs t=3", shape=box];
  f_prior -> x_1_1;
  f_prior -> x_1_2;
  x_1_1 -> f_dyn_2;
  f_dyn_2 -> x_2_1;
  x_1_2 -> f_dyn_2;
  f_dyn_2 -> x_2_2;
  x_2_1 -> f_dyn_3;
  f_dyn_3 -> x_3_1;
  x_2_2 -> f_dyn_3;
  f_dyn_3 -> x_3_2;
  x_1_1 -> f_obs_1;
  x_1_2 -> f_obs_1;
  f_obs_1 -> y_1_1;
  x_2_1 -> f_obs_2;
  x_2_2 -> f_obs_2;
  f_obs_2 -> y_2_1;
  x_3_1 -> f_obs_3;
  x_3_2 -> f_obs_3;
  f_obs_3 -> y_3_1;
}
